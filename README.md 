# Observability Learning Notes

## Useful Links
- **Swagger UI** → http://localhost:8080/swagger-ui/index.html
- **OpenAPI YAML** → http://localhost:8080/openapi.yaml

---

## What we have achieved so far ✅

### API side
- Spring Boot REST API with `/api/hello` + `/api/compute`
- `compute` sometimes throws `RuntimeException("simulated_failure")`
- Added **GlobalExceptionHandler** so errors return our custom `ErrorResponse` JSON instead of Spring generic error body
- Added Micrometer annotations:
  - `@Observed` → trace/span naming
  - `@Timed` → method latency measurement
- Server logs each request (shows endpoint + params)

### Load Client side
- Java HttpClient load generator continuously calls `/hello` & `/compute`
- Prints **status code + response body** to console
- We now see:
  - successful responses
  - random 500s with our own `{"error":"simulated_failure","endpoint":"/api/compute"}` JSON
- This stream acts as “synthetic load” to simulate real traffic

### Key Outcome
We now have a **controlled signal generator** that produces:
- latency variation
- random errors
- structured JSON responses

This is ready for:
- regression detection
- anomaly / AI correlation
- later → OTel exporter + collector pipeline

---

## How to run

### Terminal #1 — start API
```bash
mvn spring-boot:run

###  Terminal #2 — start load generator
```bash
mvn -q exec:java

### Key Metrics
#### Useful URLs
- Index of endpoints: http://localhost:8080/actuator
- List all metric names: http://localhost:8080/actuator/metrics
- Health: http://localhost:8080/actuator/health

#### Your custom timers (from @Timed)
- Compute latency: http://localhost:8080/actuator/metrics/demo.compute.latency
- Hello latency: http://localhost:8080/actuator/metrics/demo.hello.latency
- You’ll see COUNT, TOTAL_TIME, and MAX.

#### Built-in HTTP metric (very useful)
- All HTTP: http://localhost:8080/actuator/metrics/http.server.requests
- Only 500s:
http://localhost:8080/actuator/metrics/http.server.requests?tag=status:500

#### By endpoint (uri) and method:
- http://localhost:8080/actuator/metrics/http.server.requests?tag=uri:/api/compute&tag=method:GET
- By outcome (SUCCESS/CLIENT_ERROR/SERVER_ERROR):
http://localhost:8080/actuator/metrics/http.server.requests?tag=outcome:SERVER_ERROR

#### JVM / system examples
- http://localhost:8080/actuator/metrics/jvm.memory.used
- http://localhost:8080/actuator/metrics/system.cpu.usage
- http://localhost:8080/actuator/metrics/jvm.gc.pause